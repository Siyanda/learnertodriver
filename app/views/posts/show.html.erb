<% title @post.title %>
<% breadcrumb :post, @post %>

<% content_for :action_bar do %>
  <%= render partial: 'layouts/common/action_bar', locals: { item: @post } %>
<% end %>

<div class="flex to-column gapped">
  <div class="flex full-width rounded shadowed basic-border max-content column white-bg post">

    <div class="post-header">
      <h1 class="post-title">
        <%= @post.title %>
      </h1>
    </div>

    <div class="post-content">
      <div class="post-body">
        <%= @post.content.html_safe %>
      </div>
    </div>

    <div class="post-footer">
      <div class="flex center-aligned spaced-between post-meta">
        <div class="flex center-aligned">
          <div class="gray-stroke small-svg icon"><%= inline_svg('icons/clock.svg') %></div>
          <p class="post-date">
            Posted <span class="time_ago_in_words"><%= @post.created_at.iso8601 %></span>
          </p>
        </div>

        <div class="flex center-aligned">
          <%= link_to like_post_path(@post), 'data-turbo-method': :put, class: 'vote' do %>
          <div class="dark-fill standard-svg icon">
            <%= inline_svg('icons/arrow-up.svg') %>
          </div>
        <% end %>

        <%= @post.weighted_score %>

          <%= link_to dislike_post_path(@post), 'data-turbo-method': :put, class: 'vote' do %>
          <div class="dark-fill standard-svg icon">
            <%= inline_svg('icons/arrow-down.svg') %>
          </div>
          <% end %>
        </div>

      </div>
    </div>
  </div>

  <%= render 'side_bar', post: @post %>
</div>

<%= render 'author_section', post: @post %>
<%= render 'comment_section', post: @post %>
